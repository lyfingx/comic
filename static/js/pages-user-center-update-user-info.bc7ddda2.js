(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-center-update-user-info"],{2372:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return n}));var n={uButton:a("3e96").default,uCellGroup:a("a95d").default,uField:a("9e6f").default},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"nickname"},[a("v-uni-view",{staticClass:"u-m-t-20"},[a("v-uni-view",{staticClass:"u-avatar-wrap"},[a("v-uni-image",{staticClass:"u-avatar-demo",attrs:{src:e.avatarLogo,mode:"aspectFill"}})],1),a("u-button",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.chooseAvatar.apply(void 0,arguments)}}},[e._v("选择新头像")])],1),a("br"),a("br"),a("br"),a("v-uni-view",{staticClass:"registered_form"},[a("u-cell-group",[a("u-field",{attrs:{maxlength:20,label:"新昵称",placeholder:e.userInfo.nickname||"游客"},model:{value:e.nickname,callback:function(t){e.nickname=t},expression:"nickname"}})],1)],1),a("v-uni-view",{staticClass:"nickname_button"},[a("u-button",{attrs:{shape:"square",type:"warning","custom-style":{"background-color":"#fed23d","font-size":"30rpx",color:"#000000",height:"92rpx"}},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleUpdate.apply(void 0,arguments)}}},[e._v("提交")])],1)],1)},r=[]},"3e72":function(e,t,a){"use strict";a.r(t);var n=a("2372"),i=a("be8c");for(var r in i)"default"!==r&&function(e){a.d(t,e,(function(){return i[e]}))}(r);a("d02a");var o,c=a("f0c5"),u=Object(c["a"])(i["default"],n["b"],n["c"],!1,null,"f57fe0d2",null,!1,n["a"],o);t["default"]=u.exports},"66c2":function(e,t,a){"use strict";function n(e){if(0===e.indexOf("_www")||0===e.indexOf("_doc")||0===e.indexOf("_documents")||0===e.indexOf("_downloads"))return e;if(0===e.indexOf("file://"))return e;if(0===e.indexOf("/storage/emulated/0/"))return e;if(0===e.indexOf("/")){var t=plus.io.convertAbsoluteFileSystem(e);if(t!==e)return t;e=e.substr(1)}return"_www/"+e}function i(e){var t=e.split(",");return t[t.length-1]}a("c975"),a("ace4"),a("d3b7"),a("ac1f"),a("3ca3"),a("466d"),a("1276"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("2954"),a("649e"),a("219c"),a("b39a"),a("72f7"),a("ddb0"),a("2b3d"),Object.defineProperty(t,"__esModule",{value:!0}),t.pathToBase64=u,t.base64ToPath=s;var r=0;function o(){return Date.now()+String(r++)}function c(e,t){for(var a=e.split("."),n=t.split("."),i=!1,r=0;r<n.length;r++){var o=a[r]-n[r];if(0!==o){i=o>0;break}}return i}function u(e){return new Promise((function(t,a){if("object"===typeof window&&"document"in window){if("function"===typeof FileReader){var i=new XMLHttpRequest;return i.open("GET",e,!0),i.responseType="blob",i.onload=function(){if(200===this.status){var e=new FileReader;e.onload=function(e){t(e.target.result)},e.onerror=a,e.readAsDataURL(this.response)}},i.onerror=a,void i.send()}var r=document.createElement("canvas"),o=r.getContext("2d"),c=new Image;return c.onload=function(){r.width=c.width,r.height=c.height,o.drawImage(c,0,0),t(r.toDataURL()),r.height=r.width=0},c.onerror=a,void(c.src=e)}"object"!==typeof plus?"object"===typeof wx&&wx.canIUse("getFileSystemManager")?wx.getFileSystemManager().readFile({filePath:e,encoding:"base64",success:function(e){t("data:image/png;base64,"+e.data)},fail:function(e){a(e)}}):a(new Error("not support")):plus.io.resolveLocalFileSystemURL(n(e),(function(e){e.file((function(e){var n=new plus.io.FileReader;n.onload=function(e){t(e.target.result)},n.onerror=function(e){a(e)},n.readAsDataURL(e)}),(function(e){a(e)}))}),(function(e){a(e)}))}))}function s(e){return new Promise((function(t,a){if("object"===typeof window&&"document"in window){e=e.split(",");var n=e[0].match(/:(.*?);/)[1],r=atob(e[1]),u=r.length,s=new Uint8Array(u);while(u--)s[u]=r.charCodeAt(u);return t((window.URL||window.webkitURL).createObjectURL(new Blob([s],{type:n})))}var f=e.split(",")[0].match(/data\:\S+\/(\S+);/);f?f=f[1]:a(new Error("base64 error"));var d=o()+"."+f;if("object"!==typeof plus)if("object"===typeof wx&&wx.canIUse("getFileSystemManager")){p=wx.env.USER_DATA_PATH+"/"+d;wx.getFileSystemManager().writeFile({filePath:p,data:i(e),encoding:"base64",success:function(){t(p)},fail:function(e){a(e)}})}else a(new Error("not support"));else{var l="_doc",v="uniapp_temp",p=l+"/"+v+"/"+d;if(!c("Android"===plus.os.name?"1.9.9.80627":"1.9.9.80472",plus.runtime.innerVersion))return void plus.io.resolveLocalFileSystemURL(l,(function(n){n.getDirectory(v,{create:!0,exclusive:!1},(function(n){n.getFile(d,{create:!0,exclusive:!1},(function(n){n.createWriter((function(n){n.onwrite=function(){t(p)},n.onerror=a,n.seek(0),n.writeAsBinary(i(e))}),a)}),a)}),a)}),a);var h=new plus.nativeObj.Bitmap(d);h.loadBase64Data(e,(function(){h.save(p,{},(function(){h.clear(),t(p)}),(function(e){h.clear(),a(e)}))}),(function(e){h.clear(),a(e)}))}}))}},"8a27":function(e,t,a){var n=a("a25e");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("4f06").default;i("bd78cda0",n,!0,{sourceMap:!1,shadowMode:!1})},a25e:function(e,t,a){var n=a("24fb");t=n(!1),t.push([e.i,".nickname[data-v-f57fe0d2]{margin-left:%?70?%;margin-right:%?70?%;display:flex;justify-content:center;flex-wrap:wrap}.nickname .registered_form[data-v-f57fe0d2]{width:100%;margin-top:%?150?%}.nickname .nickname_button[data-v-f57fe0d2]{margin-top:%?200?%;width:100%}.nickname .u-avatar-wrap[data-v-f57fe0d2]{margin-top:%?80?%;overflow:hidden;margin-bottom:%?80?%;text-align:center}.nickname .u-avatar-demo[data-v-f57fe0d2]{width:%?150?%;height:%?150?%;border-radius:%?100?%}",""]),e.exports=t},ba26:function(e,t,a){"use strict";(function(e){a("caad"),a("2532"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a("66c2"),i={data:function(){return{nickname:"",avatarLogo:"",avatar:"",userInfo:{}}},onLoad:function(){this.userInfo=this.$store.state.userInfo,this.avatarLogo=this.userInfo.avatar},created:function(){var t=this;uni.$on("uAvatarCropper",(function(a){t.avatarLogo=a,t.avatar=a,t.avatar,a.includes("base64")||(0,n.pathToBase64)(a).then((function(e){t.avatar=e})).catch((function(t){e.error(t)}))}))},methods:{chooseAvatar:function(){this.$u.route({url:"/components/u-avatar-cropper/u-avatar-cropper",params:{destWidth:300,rectWidth:200,fileType:"jpg"}})},handleUpdate:function(){if(this.nickname||this.avatar){var e={};this.nickname&&(e.nickname=this.nickname,this.userInfo.nickname=this.nickname),this.avatar&&(e.avatar=this.avatar,this.userInfo.avatar=this.avatar),this.$store.commit("setUserInfo",this.userInfo),this.$loading(),this.nickname="",this.avatar="",this.$goBack(3e3)}}}};t.default=i}).call(this,a("5a52")["default"])},be8c:function(e,t,a){"use strict";a.r(t);var n=a("ba26"),i=a.n(n);for(var r in n)"default"!==r&&function(e){a.d(t,e,(function(){return n[e]}))}(r);t["default"]=i.a},d02a:function(e,t,a){"use strict";var n=a("8a27"),i=a.n(n);i.a}}]);