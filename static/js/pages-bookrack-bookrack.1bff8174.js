(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-bookrack-bookrack"],{3691:function(n,r,t){"use strict";var e=t("a6301"),a=t.n(e);a.a},"5d55":function(n,r,t){"use strict";var e;t.d(r,"b",(function(){return a})),t.d(r,"c",(function(){return i})),t.d(r,"a",(function(){return e}));var a=function(){var n=this,r=n.$createElement,e=n._self._c||r;return e("v-uni-view",{staticClass:"content"},[e("v-uni-view",{staticClass:"l-fixed"},[e("v-uni-view",{staticClass:"l-status"})],1),e("v-uni-view",{staticClass:"l-body l-clear-both"},[n._l(n.books,(function(r,t){return e("v-uni-view",{key:t,staticClass:"l-li",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.navtoDetail(r)},longpress:function(t){arguments[0]=t=n.$handleEvent(t),n.deleteBook(r)}}},[e("v-uni-image",{staticClass:"l-li-img",attrs:{src:r.icon,mode:"aspectFill"}}),r.pivot&&r.last_chapter_created_at>r.pivot.updated_at?e("v-uni-icon",{staticStyle:{float:"left"},attrs:{type:"waiting",size:"20",color:"white"}}):n._e(),e("v-uni-view",{staticClass:"l-li-txt"},[n._v(n._s(r.name))])],1)})),e("v-uni-view",{staticClass:"l-add"},[e("v-uni-view",{staticClass:"l-add-view",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.search()}}},[e("v-uni-image",{staticClass:"l-icon-add",attrs:{src:t("7099"),mode:"","lazy-load":"true"}})],1)],1)],2)],1)},i=[]},7099:function(n,r){n.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAACTUlEQVR4Xu2cz2oTURjFzxmtuBH1EcSXUFrtVpssM6Ez7VpfoQUFhYK+gq7tRJIsp212KrTiS1g37q3iQmh7P0lIC/6ZSeAjnaY5WYa5c7/743fPvQOXS5yDXz1O7gJ8arCFYTl7gdHGTntzr+ryWHUB9Xi5YWALwOW/ajkiLMk7b7tV1lgpoFqa3sSh7QO4UQDhO+Z4ayvLvlUFqVJA9Ua6YrQ3ZYOncTXvZpszCWgpTtYIvCgFRD7P29kzASogQOBl3mmtC5AA/UtgrCkmg0ZkkAAJUGG+aoqNWHoESIB8uxMZJINkkI+ADPLxUwbJIBnkIyCDfPyUQTJIBvkIyCAfP2WQDJJBPgIyyMdPGXSRDOofJLDDUI8Y3bYQrvrcGK+1kXcILI54+j3I3nhv9D/FgK92BdsnByYGhxdqjTQG7XXJKQt/z9P1hgMYH211sw5rjeV7IN8BuDRdY5h4tccwu89anOwAeDDx7qazg14f0A8A16az/olX/VOAyhkPAGmKFUPqKaSL4RwHRouDZX6pmTRpeKVl/pTWgRGPt9ut9ukhzvO6USTskxk+TDyOATCKfgULnzkX5X9sFM+i8//1oW+xi/QtVoVFMkgG+byTQTJIBvkIyCAfP2WQDJJBPgIyyMdPGSSDZJCPgAzy8VMGySAZ5CMgg3z8lEEySAb5CMggHz9lkAw6A4Nm+XocXbA0QrDhFV1fAFwveHS2r+jqQym75A3GtH/S1DeRfa0rvcPspPSHzZX5yMITAPPD/z4S2Mg7rV3f8PytfwOmTZr2a1xqEwAAAABJRU5ErkJggg=="},7419:function(n,r,t){"use strict";t("4160"),t("caad"),t("d3b7"),t("2532"),t("159b"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var e={data:function(){return{books:[],tokenInfo:""}},onShow:function(){this.syncBooks(),getApp().globalData.userInfo.vip_end&&this.$minApi.getUserInfoWithToken()},onHide:function(){getApp().globalData.books=this.books},methods:{navtoDetail:function(n){getApp().globalData.currentBook=n,uni.navigateTo({url:"/pages/read/read"})},search:function(){uni.navigateTo({url:"/pages/mall/search"})},syncBooks:function(){var n=this,r=getApp().globalData.books;setTimeout((function(){r.length!=n.books.length&&n.remoteBookrack()}),5e3),r.forEach((function(r,t,e){r.read_chapter_id&&n.$minApi.storeBook(r).then((function(a){r.read_chapter_id>1&&n.$minApi.updateLastRead({id:r.read_chapter_id}),r.read_chapter_id=null,e[t]=r}))}))},remoteBookrack:function(){var n=this;uni.showLoading(),this.$minApi.getUserBookrack().then((function(r){n.books=r,n.$cache.set("bookrack",n.books),n.books.length||n.$toast("书架空空,去选一本吧")})).finally((function(){uni.hideLoading()}))},deleteBook:function(n){var r=this;uni.showLoading({title:"确认删除中...",mask:!0}),setTimeout((function(){uni.hideLoading(),uni.showModal({title:"确认删除?",content:n.name,success:function(t){t.confirm&&r.$minApi.deleteBook(n).then((function(n){r.remoteBookrack(),r.$toast("删除成功")}))}})}),1500)}},mounted:function(){var n=this,r=this.$cache.get("bookrack");r&&(this.books=r),this.remoteBookrack(),setTimeout((function(){n.currentPage().route.includes("bookrack")&&n.$toast("长按书籍可删除")}),6e3)}};r.default=e},"7c29":function(n,r,t){var e=t("24fb");r=e(!1),r.push([n.i,"\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/* l-body */.l-body[data-v-778ab018]{padding:var(--pad-lr) 0 var(--pad-lr) var(--pad-lr)}.l-ul[data-v-778ab018]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding-bottom:%?32?%}.l-add[data-v-778ab018],\r\n.l-li[data-v-778ab018]{width:28%;float:left;height:%?392?%;margin-right:5%;margin-bottom:%?32?%}.l-li[data-v-778ab018]{text-align:center}.l-add-view[data-v-778ab018],\r\n.l-li-img[data-v-778ab018]{width:100%;height:%?300?%;border-radius:%?10?%;margin-bottom:%?8?%;z-index:0}.l-add-view[data-v-778ab018]{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:flex;border:%?6?% solid #7e7f94;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.l-icon-add[data-v-778ab018]{width:%?36?%;height:%?36?%}.l-li-txt[data-v-778ab018]{padding:0 %?10?%;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden}",""]),n.exports=r},a6301:function(n,r,t){var e=t("7c29");"string"===typeof e&&(e=[[n.i,e,""]]),e.locals&&(n.exports=e.locals);var a=t("4f06").default;a("10f8c2e2",e,!0,{sourceMap:!1,shadowMode:!1})},bd7f:function(n,r,t){"use strict";t.r(r);var e=t("5d55"),a=t("c89d");for(var i in a)"default"!==i&&function(n){t.d(r,n,(function(){return a[n]}))}(i);t("3691");var o,s=t("f0c5"),c=Object(s["a"])(a["default"],e["b"],e["c"],!1,null,"778ab018",null,!1,e["a"],o);r["default"]=c.exports},c89d:function(n,r,t){"use strict";t.r(r);var e=t("7419"),a=t.n(e);for(var i in e)"default"!==i&&function(n){t.d(r,n,(function(){return e[n]}))}(i);r["default"]=a.a}}]);