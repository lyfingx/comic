(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-bookrack-bookrack"],{7099:function(n,r){n.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAACTUlEQVR4Xu2cz2oTURjFzxmtuBH1EcSXUFrtVpssM6Ez7VpfoQUFhYK+gq7tRJIsp212KrTiS1g37q3iQmh7P0lIC/6ZSeAjnaY5WYa5c7/743fPvQOXS5yDXz1O7gJ8arCFYTl7gdHGTntzr+ryWHUB9Xi5YWALwOW/ajkiLMk7b7tV1lgpoFqa3sSh7QO4UQDhO+Z4ayvLvlUFqVJA9Ua6YrQ3ZYOncTXvZpszCWgpTtYIvCgFRD7P29kzASogQOBl3mmtC5AA/UtgrCkmg0ZkkAAJUGG+aoqNWHoESIB8uxMZJINkkI+ADPLxUwbJIBnkIyCDfPyUQTJIBvkIyCAfP2WQDJJBPgIyyMdPGXSRDOofJLDDUI8Y3bYQrvrcGK+1kXcILI54+j3I3nhv9D/FgK92BdsnByYGhxdqjTQG7XXJKQt/z9P1hgMYH211sw5rjeV7IN8BuDRdY5h4tccwu89anOwAeDDx7qazg14f0A8A16az/olX/VOAyhkPAGmKFUPqKaSL4RwHRouDZX6pmTRpeKVl/pTWgRGPt9ut9ukhzvO6USTskxk+TDyOATCKfgULnzkX5X9sFM+i8//1oW+xi/QtVoVFMkgG+byTQTJIBvkIyCAfP2WQDJJBPgIyyMdPGSSDZJCPgAzy8VMGySAZ5CMgg3z8lEEySAb5CMggHz9lkAw6A4Nm+XocXbA0QrDhFV1fAFwveHS2r+jqQym75A3GtH/S1DeRfa0rvcPspPSHzZX5yMITAPPD/z4S2Mg7rV3f8PytfwOmTZr2a1xqEwAAAABJRU5ErkJggg=="},7419:function(n,r,t){"use strict";t("4160"),t("c975"),t("d3b7"),t("159b"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a={data:function(){return{books:[],tokenInfo:""}},onShow:function(){this.syncBooks()},methods:{navtoDetail:function(n){getApp().globalData.currentBook=n,uni.navigateTo({url:"/pages/read/read"})},search:function(){uni.navigateTo({url:"/pages/mall/search"})},syncBooks:function(){var n=this;this.books.forEach((function(r,t,a){r.read_chapter_id&&n.$minApi.storeBook(r).then((function(e){r.read_chapter_id>1&&n.$minApi.updateLastRead({id:r.read_chapter_id}).then((function(n){})),r.read_chapter_id=null,a[t]=r}))}))},remoteBookrack:function(){var n=this;uni.showLoading(),this.$minApi.getUserBookrack().then((function(r){n.books=r,getApp().globalData.books=r,n.books.length||n.$toast("书架空空,去选一本吧"),n.$minApi.getUserInfoWithToken()})).finally((function(){uni.hideLoading()}))},deleteBook:function(n){var r=this;uni.showLoading({title:"确认删除中...",mask:!0}),setTimeout((function(){uni.hideLoading(),uni.showModal({title:"确认删除?",content:n.name,success:function(t){t.confirm&&r.$minApi.deleteBook(n).then((function(n){r.remoteBookrack(),r.$toast("删除成功")}))}})}),1500)}},mounted:function(){var n=this;this.remoteBookrack(),setTimeout((function(){n.currentPage().route.indexOf("bookrack")&&n.$toast("长按书籍可删除")}),6e3)}};r.default=a},7602:function(n,r,t){var a=t("24fb");r=a(!1),r.push([n.i,"\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/* l-body */.l-body[data-v-af24766c]{padding:var(--pad-lr) 0 var(--pad-lr) var(--pad-lr)}.l-ul[data-v-af24766c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding-bottom:%?32?%}.l-add[data-v-af24766c],\r\n.l-li[data-v-af24766c]{width:28%;float:left;height:%?392?%;margin-right:5%;margin-bottom:%?32?%}.l-li[data-v-af24766c]{text-align:center}.l-add-view[data-v-af24766c],\r\n.l-li-img[data-v-af24766c]{width:100%;height:%?300?%;-webkit-border-radius:%?10?%;border-radius:%?10?%;margin-bottom:%?8?%;z-index:0}.l-add-view[data-v-af24766c]{-webkit-box-sizing:border-box;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:flex;border:%?6?% solid #7e7f94;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.l-icon-add[data-v-af24766c]{width:%?36?%;height:%?36?%}.l-li-txt[data-v-af24766c]{padding:0 %?10?%;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden}",""]),n.exports=r},a28a:function(n,r,t){var a=t("7602");"string"===typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);var e=t("4f06").default;e("6ece047a",a,!0,{sourceMap:!1,shadowMode:!1})},aa5c:function(n,r,t){"use strict";var a;t.d(r,"b",(function(){return e})),t.d(r,"c",(function(){return i})),t.d(r,"a",(function(){return a}));var e=function(){var n=this,r=n.$createElement,a=n._self._c||r;return a("v-uni-view",{staticClass:"content"},[a("v-uni-view",{staticClass:"l-fixed"},[a("v-uni-view",{staticClass:"l-status"})],1),a("v-uni-view",{staticClass:"l-body l-clear-both"},[n._l(n.books,(function(r,t){return a("v-uni-view",{key:t,staticClass:"l-li",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.navtoDetail(r)},longpress:function(t){arguments[0]=t=n.$handleEvent(t),n.deleteBook(r)}}},[a("v-uni-image",{staticClass:"l-li-img",attrs:{src:r.icon,mode:"aspectFill"}}),r.pivot&&r.last_chapter_created_at>r.pivot.updated_at?a("v-uni-icon",{staticStyle:{float:"left"},attrs:{type:"waiting",size:"20",color:"white"}}):n._e(),a("v-uni-view",{staticClass:"l-li-txt"},[n._v(n._s(r.name))])],1)})),a("v-uni-view",{staticClass:"l-add"},[a("v-uni-view",{staticClass:"l-add-view",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.search()}}},[a("v-uni-image",{staticClass:"l-icon-add",attrs:{src:t("7099"),mode:"","lazy-load":"true"}})],1)],1)],2)],1)},i=[]},bd7f:function(n,r,t){"use strict";t.r(r);var a=t("aa5c"),e=t("c89d");for(var i in e)"default"!==i&&function(n){t.d(r,n,(function(){return e[n]}))}(i);t("f0ca");var o,c=t("f0c5"),s=Object(c["a"])(e["default"],a["b"],a["c"],!1,null,"af24766c",null,!1,a["a"],o);r["default"]=s.exports},c89d:function(n,r,t){"use strict";t.r(r);var a=t("7419"),e=t.n(a);for(var i in a)"default"!==i&&function(n){t.d(r,n,(function(){return a[n]}))}(i);r["default"]=e.a},f0ca:function(n,r,t){"use strict";var a=t("a28a"),e=t.n(a);e.a}}]);